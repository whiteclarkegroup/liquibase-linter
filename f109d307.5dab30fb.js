(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{100:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return u}));var r=t(2),a=t(6),i=(t(0),t(112)),o={title:"primary-key-name"},l={unversionedId:"rules/primary-key-name",id:"rules/primary-key-name",isDocsHomePage:!1,title:"primary-key-name",description:"Why?",source:"@site/docs/rules/primary-key-name.md",slug:"/rules/primary-key-name",permalink:"/liquibase-linter/docs/rules/primary-key-name",version:"current",sidebar:"docs",previous:{title:"object-name-length",permalink:"/liquibase-linter/docs/rules/object-name-length"},next:{title:"schema-name",permalink:"/liquibase-linter/docs/rules/schema-name"}},c=[{value:"Why?",id:"why",children:[]},{value:"Options",id:"options",children:[]},{value:"Example Usage",id:"example-usage",children:[]}],s={rightToc:c};function u(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"why"},"Why?"),Object(i.b)("p",null,"When ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"http://www.liquibase.org/documentation/changes/add_primary_key.html"}),"adding a primary key"),", it's possible to omit a specific ",Object(i.b)("inlineCode",{parentName:"p"},"constraintName")," for the primary key. This is hazardous, because the database vendor will automatically name it for you in an unpredictable way, which makes things difficult later if you want to reference or remove it."),Object(i.b)("p",null,"Also, you might already have a broad standard for object names - and be enforcing it with ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/liquibase-linter/docs/rules/object-name"}),"the object-name rule")," - but you might also want a more specific rule concerning how primary keys are named."),Object(i.b)("p",null,"This rule will fail if there is no ",Object(i.b)("inlineCode",{parentName:"p"},"constraintName")," given when adding a primary key, or when configured with a pattern, will fail if the given name does not match the pattern."),Object(i.b)("h2",{id:"options"},"Options"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"pattern")," - (regex, as string) optional regular expression that the name of any added primary key must adhere to"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"dynamicValue")," - (string) Spring EL expression, with the ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/liquibase/liquibase/blob/main/liquibase-core/src/main/java/liquibase/change/core/AddPrimaryKeyChange.java"}),Object(i.b)("inlineCode",{parentName:"a"},"AddPrimaryKeyChange"))," instance as its expression scope, that should resolve to a string, and can then be interpolated in the pattern with ",Object(i.b)("inlineCode",{parentName:"li"},"{{value}}"))),Object(i.b)("h2",{id:"example-usage"},"Example Usage"),Object(i.b)("p",null,"To simply ensure that a name is always given:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n    "rules": {\n        "primary-key-name": true\n    }\n}\n')),Object(i.b)("p",null,"To ensure that a pattern is matched, including the table name:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n    "rules": {\n        "primary-key-name": {\n            "pattern": "^{{value}}_PK$",\n            "dynamicValue": "tableName",\n            "errorMessage": "Primary key names must be the table name, suffixed with \'PK\', e.g. FOO_PK"\n        }\n    }\n}\n')))}u.isMDXComponent=!0},112:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return d}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),u=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(t),b=r,d=p["".concat(o,".").concat(b)]||p[b]||m[b]||i;return t?a.a.createElement(d,l(l({ref:n},s),{},{components:t})):a.a.createElement(d,l({ref:n},s))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=b;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);